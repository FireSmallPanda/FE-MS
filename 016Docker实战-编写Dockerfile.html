<html>
<head>
  <title>016Docker实战-编写Dockerfile</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601568 (zh-CN, DDL); Windows/6.1.1 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="609"/>
<h1>016Docker实战-编写Dockerfile</h1>

<div>
<span><div style="font-size: 16px; min-width: 100%; position: relative;"><div style="outline: 0px; box-sizing: border-box; text-size-adjust: 100%; -webkit-font-smoothing: antialiased;"><div style="box-sizing: inherit; outline: 0px; min-width: 1200px; font-size: 14px; background-color: rgb(245, 246, 247); -webkit-font-smoothing: antialiased;"><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:16px;z-index:9;background-color:rgb(255, 255, 255);"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;"><div><span style="box-sizing: inherit; outline: 0px; font-size: 14px;"><span style="padding: 0px; margin: 4px 8px 0px 0px; outline: 0px; box-sizing: inherit; text-align: center; border-radius: 50%; width: 26px; height: 26px; font-size: 12px; display: inline-block; border: 1px solid rgb(244, 206, 208); float: left; color: rgb(202, 12, 22); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 26px;">原</span></span></div><h1 style="box-sizing:inherit;outline:0px;padding:0px;margin:0.67em 0px;font-size:24px;word-wrap:break-word;"><span style="font-size: 24px; color: rgba(0, 0, 0, 0.75); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">Docker实战-编写Dockerfile</span></h1></div><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;position:relative;"><div style="width: 88%; height: 22px; box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; overflow: hidden;"><div><span style="box-sizing: inherit; outline: 0px; margin: 0px 14px 0px 0px; padding: 0px; font-size: 14px; color: rgb(133, 133, 133); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">2017年10月23日 14:20:23</span> <a href="https://me.csdn.net/qq_29999343" style="box-sizing: inherit; outline: 0px; margin: 0px 14px 0px 0px; padding: 0px; cursor: pointer; background-color: transparent; font-size: 14px; color: rgb(120, 165, 241); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67; text-decoration: none;" target="_blank">DWWWWWEI</a> <span style="box-sizing: inherit; outline: 0px; margin: 0px 14px 0px 0px; padding: 0px; font-size: 14px; color: rgb(133, 133, 133); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">阅读数：6535</span> <span style="box-sizing: inherit; outline: 0px; margin: 0px 14px 0px 0px; padding: 0px; font-size: 12px; color: rgb(77, 77, 77); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">标签：</span> <a href="http://so.csdn.net/so/search/s.do?q=docker&amp;t=blog" style="background-color: transparent; margin: 0px 8px 0px 0px; cursor: pointer; outline: 0px; box-sizing: inherit; border-radius: 100px; padding: 0px 8px; display: inline-block; word-wrap: break-word; text-align: center; border: 1px solid rgb(204, 204, 204); min-width: 24px; height: 21px; font-size: 12px; color: rgb(77, 77, 77); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 21px; text-decoration: none;" target="_blank">docker</a> <a href="http://so.csdn.net/so/search/s.do?q=dockerfile&amp;t=blog" style="background-color: transparent; margin: 0px 8px 0px 0px; cursor: pointer; outline: 0px; box-sizing: inherit; border-radius: 100px; padding: 0px 8px; display: inline-block; word-wrap: break-word; text-align: center; border: 1px solid rgb(204, 204, 204); min-width: 24px; height: 21px; font-size: 12px; color: rgb(77, 77, 77); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 21px; text-decoration: none;" target="_blank">dockerfile</a> <span style="top: 0px; padding: 0px; margin: 0px; outline: 0px; box-sizing: inherit; cursor: pointer; background-color: rgb(255, 255, 255); font-size: 12px; right: 101px; width: 45px; display: inline-block; letter-spacing: 0px; color: rgb(51, 153, 234); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 20px;">更多</span></div><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;margin-top:6px;margin-bottom:0px;"><span style="box-sizing: inherit; outline: 0px; margin: 0px 14px 0px 0px; padding: 0px; font-size: 12px; color: rgb(77, 77, 77); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">个人分类：</span> <a href="https://blog.csdn.net/qq_29999343/article/category/7223477" style="outline: 0px; background-color: transparent; padding: 0px; margin: 0px 24px 0px 0px; box-sizing: inherit; cursor: pointer; word-wrap: break-word; display: inline-block; font-size: 12px; color: rgb(121, 165, 229); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67; text-decoration: none;" target="_blank">docker</a></div></div><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;position:absolute;top:0px;right:0px;"></div></div></div></div><div style="box-sizing: inherit; outline: 0px; margin: 0px; padding: 16px 0px 0px; position: relative;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-wrap:break-word;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px 0px 8px; word-wrap: break-word; font-size: 12px;"><span style="font-size: 12px; color: rgb(153, 153, 153); font-family: Lato, -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/qq_29999343/article/details/78318397</span></div><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-wrap: break-word; word-break: break-word;"><div><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;"><img src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' style='display: none%3b' data-evernote-id='351' class='js-evernote-checked'%3e%3cpath stroke-linecap='round' d='M5%2c0 0%2c2.5 5%2c5z' id='raphael-marker-block' style='-webkit-tap-highlight-color: rgba(0%2c 0%2c 0%2c 0)%3b' data-evernote-id='352' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e" style="outline:0px;margin:0px;padding:0px;box-sizing:border-box;word-wrap:break-word;overflow:hidden;display:none;"></img></span></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; font-size: 24px; word-wrap: break-word;"><span style="font-size: 24px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 32px;">一、编译镜像</span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">1. 编译镜像</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    Dockerfile类似于Makfile，用户使用</span><span style="font-size: 14px; background-color: rgb(249, 242, 244); border-radius: 2px; outline: 0px; margin: 0px; padding: 2px 4px; box-sizing: border-box; word-wrap: break-word; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">docker build</span><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">就可以编译镜像，使用该命令可以设置编译镜像时使用的CPU数量、内存大小、文件路径等</span></div><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：docker build [OPTIONS] PATH| URL| -</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">常见选项：</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          -t 设置镜像的名称和TAG，格式为name:tag</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          -f Dockerfile的名称，默认为PATH/Dockerfile</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">例子：docker build -f ~/php.Dockerfile .</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：PATH是编译镜像使用的工作目录，Docker Daemon在编译开始时，会扫描PATH中的所有文件，可以在编译目录中加入.dockerignore过滤不需要的文件</span></div></div></blockquote><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    Docker Daemon从Dockerfile中顺序读取指令，生成一个临时容器，在容器中执行指令，容器编译成功后会提交作为镜像层加入最终镜像，为了加快编译过程，Docker Daemon采用了缓存机制，如果在缓存中找到了需要的中间镜像则直接使用该镜像而不生成临时容器（编译时可以使用选项–no-cache选择不使用缓存）</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">2. dockerignore文件</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    编译开始前，Docker Daemon会读取编译目录中的.dockerignore文件，忽略其中的文件和目录，在其中可以使用通配符（?代表一个字符，*代表零个或任意个字符），使用通配符时，总会出现那么几个例外，这时可以使用!+文件名，Docker Daemon会读取!后面的文件</span></div><div style="margin: 0px 0px 24px; overflow-y: hidden; overflow-x: auto; box-sizing: border-box; outline: 0px; position: relative; font-size: 14px; word-wrap: break-word; border: none; background-color: rgb(246, 248, 250); padding: 8px 16px 6px 56px;"><div style="font-size: 14px; background: rgb(246, 248, 250); outline: 0px; margin: 0px; box-sizing: border-box; overflow-x: auto; word-wrap: break-word; text-size-adjust: none; border-radius: 4px; white-space: pre; padding: 0px;"><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">*</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/temp* 忽略PATH路径下一级子目录中以temp开头的文件和目录，如PAHT/</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">A</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/temp.txt</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">*</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 136, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/*/temp</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">* 忽略</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">PATH</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">路径下二级子目录中以temp开头的文件和目录，如</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">PATH</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">A</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">B</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">/temp.txt</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">*.md</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">!</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">README</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">.md 忽略所有md文件，除了</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">README</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">.md</span></div></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">3</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">4</span></div></div><h2 style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 16px; font-size: 24px; word-wrap: break-word;"><span style="font-size: 24px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 32px;">二、Dockerfile指令详解</span></h2><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    Dockerfile由多条指令组成，每条指令在编译镜像时执行相应的程序完成某些功能，由指令+参数组成，以逗号分隔，#作为注释起始符，虽说指令不区分大小写，但是一般指令使用大些，参数使用小写</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;"><img src="016Docker实战-编写Dockerfile_files/SouthEast" type="image/png" data-filename="SouthEast" height="619" style="outline:0px;padding:0px;border-style:none;box-sizing:border-box;margin:24px 0px;word-wrap:break-word;max-width:100%;cursor:zoom-in;" width="839"/></span></div><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：FROM</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置基础镜像</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：FROM &lt; image&gt;[:&lt; tag&gt; | @&lt; digest&gt;]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：镜像都是从一个基础镜像（操作系统或其他镜像）生成，可以在一个Dockerfile中添加多条FROM指令，一次生成多个镜像</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：如果忽略tag选项，会使用latest镜像</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：MAINTAINER</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置镜像作者</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：MAINTAINER &lt; name&gt;</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：RUN</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：RUN &lt; command&gt;</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          RUN [“executable”,”param1”,”param2”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：RUN指令会生成容器，在容器中执行脚本，容器使用当前镜像，脚本指令完成后，Docker Daemon会将该容器提交为一个中间镜像，供后面的指令使用</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">补充：RUN指令第一种方式为shell方式，使用/bin/sh -c &lt; command&gt;运行脚本，可以在其中使用\将脚本分为多行</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          RUN指令第二种方式为exec方式，镜像中没有/bin/sh或者要使用其他shell时使用该方式，其不会调用shell命令</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">例子：RUN source</span> <span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">HOME/.bashrc;\</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          echo $HOME</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          RUN [“/bin/bash”,”-c”,”echo hello”]</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          RUN [“sh”,”-c”,”echo”,”$HOME”] 使用第二种方式调用shell读取环境变量</span></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：CMD</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置容器的启动命令</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：CMD [“executable”,”param1”,”param2”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          CMD [“param1”,”param2”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          CMD &lt; command&gt;</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：CMD第一种、第三种方式和RUN类似，第二种方式为ENTRYPOINT参数方式，为entrypoint提供参数列表</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：Dockerfile中只能有一条CMD命令，如果写了多条则最后一条生效</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：LABEL</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置镜像的标签</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">延伸：镜像标签可以通过docker inspect查看</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">格式：LABEL &lt; key&gt;=&lt; value&gt; &lt; key&gt;=&lt; value&gt; …</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：不同标签之间通过空格隔开</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：每条指令都会生成一个镜像层，Docker中镜像最多只能有127层，如果超出Docker Daemon就会报错，如LABEL ..=.. &lt;假装这里有个换行&gt; LABEL ..=..合在一起用空格分隔就可以减少镜像层数量，同样，可以使用连接符\将脚本分为多行</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          镜像会继承基础镜像中的标签，如果存在同名标签则会覆盖</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：EXPOSE</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置镜像暴露端口，记录容器启动时监听哪些端口</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：EXPOSE &lt; port&gt; &lt; port&gt; …</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">延伸：镜像暴露端口可以通过docker inspect查看</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：容器启动时，Docker Daemon会扫描镜像中暴露的端口，如果加入-P参数，Docker Daemon会把镜像中所有暴露端口导出，并为每个暴露端口分配一个随机的主机端口（暴露端口是容器监听端口，主机端口为外部访问容器的端口）</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：EXPOSE只设置暴露端口并不导出端口，只有启动容器时使用-P/-p才导出端口，这个时候才能通过外部访问容器提供的服务</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：ENV</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置镜像中的环境变量</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：ENV &lt; key&gt;=&lt; value&gt;…|&lt; key&gt; &lt; value&gt;</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：环境变量在整个编译周期都有效，第一种方式可设置多个环境变量，第二种方式只设置一个环境变量</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：通过</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">{变量名}或者</span> <span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">变量名使用变量，使用方式</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">{变量名}时可以用</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">{变量名:-default}</span> <span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">$</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">{变量名:+cover}设定默认值或者覆盖值</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          ENV设置的变量值在整个编译过程中总是保持不变的</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：ADD</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：复制文件到镜像中</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：ADD &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：当路径中有空格时，需要使用第二种方式</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          当src为文件或目录时，Docker Daemon会从编译目录寻找这些文件或目录，而dest为镜像中的绝对路径或者相对于WORKDIR的路径</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：src为目录时，复制目录中所有内容，包括文件系统的元数据，但不包括目录本身</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          src为压缩文件，并且压缩方式为gzip,bzip2或xz时，指令会将其解压为目录</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          如果src为文件，则复制文件和元数据</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          如果dest不存在，指令会自动创建dest和缺失的上级目录</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：COPY</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：复制文件到镜像中</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：COPY &lt; src&gt;… &lt; dest&gt;|[“&lt; src&gt;”,… “&lt; dest&gt;”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：指令逻辑和ADD十分相似，同样Docker Daemon会从编译目录寻找文件或目录，dest为镜像中的绝对路径或者相对于WORKDIR的路径</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：ENTRYPOINT</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置容器的入口程序</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：ENTRYPOINT [“executable”,”param1”,”param2”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          ENTRYPOINT command param1 param2（shell方式）</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：入口程序是容器启动时执行的程序，docker run中最后的命令将作为参数传递给入口程序</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          入口程序有两种格式：exec、shell，其中shell使用</span><span style="font-size: 14px; background-color: rgb(249, 242, 244); border-radius: 2px; outline: 0px; margin: 0px; padding: 2px 4px; box-sizing: border-box; word-wrap: break-word; color: rgb(199, 37, 78); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">/bin/sh -c</span><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">运行入口程序，此时入口程序不能接收信号量</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          当Dockerfile有多条ENTRYPOINT时只有最后的ENTRYPOINT指令生效</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          如果使用脚本作为入口程序，需要保证脚本的最后一个程序能够接收信号量，可以在脚本最后使用exec或gosu启动传入脚本的命令</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：通过shell方式启动入口程序时，会忽略CMD指令和docker run中的参数</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          为了保证容器能够接受docker stop发送的信号量，需要通过exec启动程序；如果没有加入exec命令，则在启动容器时容器会出现两个进程，并且使用docker stop命令容器无法正常退出（无法接受SIGTERM信号），超时后docker stop发送SIGKILL，强制停止容器</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">例子：FROM ubuntu &lt;换行&gt; ENTRYPOINT exec top -b</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：VOLUME</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置容器的挂载点</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：VOLUME [“/data”]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          VOLUME /data1 /data2</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：启动容器时，Docker Daemon会新建挂载点，并用镜像中的数据初始化挂载点，可以将主机目录或数据卷容器挂载到这些挂载点</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：USER</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置RUN CMD ENTRYPOINT的用户名或UID</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：USER &lt; name&gt;</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：WORKDIR</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置RUN CMD ENTRYPOINT ADD COPY指令的工作目录</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：WORKDIR &lt; Path&gt;</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：如果工作目录不存在，则Docker Daemon会自动创建</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          Dockerfile中多个地方都可以调用WORKDIR，如果后面跟的是相对位置，则会跟在上条WORKDIR指定路径后（如WORKDIR /A   WORKDIR B   WORKDIR C，最终路径为/A/B/C）</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：ARG</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置编译变量</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：ARG &lt; name&gt;[=&lt; defaultValue&gt;]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">注意：ARG从定义它的地方开始生效而不是调用的地方，在ARG之前调用编译变量总为空，在编译镜像时，可以通过docker build –build-arg &lt; var&gt;=&lt; value&gt;设置变量，如果var没有通过ARG定义则Daemon会报错</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          可以使用ENV或ARG设置RUN使用的变量，如果同名则ENV定义的值会覆盖ARG定义的值，与ENV不同，ARG的变量值在编译过程中是可变的，会对比使用编译缓存造成影响（ARG值不同则编译过程也不同）</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">例子：ARG CONT_IMAG_VER &lt;换行&gt; RUN echo $CONT_IMG_VER</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          ARG CONT_IMAG_VER &lt;换行&gt; RUN echo hello</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">          当编译时给ARG变量赋值hello，则两个Dockerfile可以使用相同的中间镜像，如果不为hello，则不能使用同一个中间镜像</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：ONBUILD</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置自径想的编译钩子指令</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：ONBUILD [INSTRUCTION]</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：从该镜像生成子镜像，在子镜像的编译过程中，首先会执行父镜像中的ONBUILD指令，所有编译指令都可以成为钩子指令</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><blockquote style="word-wrap: break-word; outline: 0px; padding: 16px; margin: 0px 0px 24px; box-sizing: border-box; border-left: 8px solid rgb(221, 223, 228); background: rgb(238, 240, 244); overflow: auto; word-break: break-word;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px; font-size: 14px; word-wrap: break-word;"><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">指令：STOPSIGNAL</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">功能描述：设置容器退出时，Docker Daemon向容器发送的信号量</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">语法：STOPSIGNAL signal</span></div><div><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">提示：信号量可以是数字或者信号量的名字，如9或者SIGKILL，信号量的数字说明在</span><a href="http://blog.csdn.net/qq_29999343/article/details/78166574" rel="nofollow" style="outline: 0px; margin: 0px; padding: 0px; cursor: pointer; background-color: transparent; box-sizing: border-box; word-wrap: break-word; font-size: 14px; color: rgb(78, 161, 219); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px; text-decoration: none; text-decoration-skip: ink;" target="_blank">Linux系统管理</a><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 22px;">中有简单介绍</span></div></div></blockquote><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">补充：ONBUILD流程</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-wrap: break-word;"><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">编译时，读取所有ONBUILD镜像并记录下来，在当前编译过程中不执行指令</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-wrap: break-word;"><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">生成镜像时将所有ONBUILD指令记录在镜像的配置文件OnBuild关键字中</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-wrap: break-word;"><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">子镜像在执行FROM指令时会读取基础镜像中的ONBUILD指令并顺序执行，如果执行过程中失败则编译中断；当所有ONBUILD执行成功后开始执行子镜像中的指令</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-wrap: break-word;"><span style="font-size: 14px; color: rgba(0, 0, 0, 0.75); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 1.67;">子镜像不会继承基础镜像中的ONBUILD指令</span></div><hr style="height:0px;border-bottom:1px solid rgb(221, 221, 221);outline:0px;margin:24px 0px;padding:0px;overflow:visible;box-sizing:border-box;border-top:none;border-right:none;border-left:none;border-image:initial;word-wrap:break-word;"/><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; word-wrap: break-word; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 700; line-height: 26px;">补充：CMD ENTRYPOINT和RUN的区别</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    RUN指令是设置编译镜像时执行的脚本和程序，镜像编译完成后，RUN指令的生命周期结束</span></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    容器启动时，可以通过CMD和ENTRYPOINT设置启动项，其中CMD叫做容器默认启动命令，如果在docker run命令末尾添加command，则会替换镜像中CMD设置的启动程序；ENRTYPOINT叫做入口程序，不能被docker run命令末尾的command替换，而是将command当作字符串，传递给ENTRYPOINT作为参数</span></div><div style="margin: 0px 0px 24px; overflow-y: hidden; overflow-x: auto; box-sizing: border-box; outline: 0px; position: relative; font-size: 14px; word-wrap: break-word; border: none; background-color: rgb(246, 248, 250); padding: 8px 16px 6px 56px;"><div style="font-size: 14px; background: rgb(246, 248, 250); outline: 0px; margin: 0px; box-sizing: border-box; overflow-x: auto; word-wrap: break-word; text-size-adjust: none; border-radius: 4px; white-space: pre; padding: 0px;"><div><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">FROM</span> <span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">ubuntu</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">ENTRYPOINT [</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ps&quot;</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><br/></div><div><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; line-height: 22px;">//通过命令docker run --rm test启动容器，打印ps的输出</span></div><div><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; line-height: 22px;">//通过命令docker run --rm test -ef启动容器，打印ps -ef的输出</span></div></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">3</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">4</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 0px 0px 16px; font-size: 16px; word-wrap: break-word;"><span style="font-size: 16px; color: rgb(79, 79, 79); font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-variant-ligatures: common-ligatures; font-weight: 400; line-height: 26px;">    在docker run中，可以通过–entrypoint替换镜像中的入口程序，在Dockerfile中，应该至少有一条CMD或者ENTRYPOINT指令，如果同时定义了CMD和ENTRYPOINT则CMD会作为参数传递给ENTRYPOINT</span></div><div style="margin: 0px 0px 24px; overflow-y: hidden; overflow-x: auto; box-sizing: border-box; outline: 0px; position: relative; font-size: 14px; word-wrap: break-word; border: none; background-color: rgb(246, 248, 250); padding: 8px 16px 6px 56px;"><div style="font-size: 14px; background: rgb(246, 248, 250); outline: 0px; margin: 0px; box-sizing: border-box; overflow-x: auto; word-wrap: break-word; text-size-adjust: none; border-radius: 4px; white-space: pre; padding: 0px;"><div><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 0, 136); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">FROM</span> <span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">ubuntu</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">ENTRYPOINT [</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;ps&quot;</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">CMD [</span><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(0, 153, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">&quot;-ef&quot;</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">]</span></div><div><br/></div><div><span style="outline: 0px; margin: 0px; padding: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; color: rgb(136, 0, 0); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-style: italic; font-variant-ligatures: common-ligatures; line-height: 22px;">//通过命令docker run --rm test启动容器，打印ps -ef的输出</span></div></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">1</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">2</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">3</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">4</span></div><div style="outline: 0px; box-sizing: border-box; font-size: inherit; word-wrap: break-word; padding: 0px 8px; margin: 0px; list-style: none;"><span style="font-size: 14px; color: rgb(153, 153, 153); font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-variant-ligatures: common-ligatures; line-height: 22px;">5</span></div></div></div><div style="height: 0px; visibility: hidden; clear: both;"></div></div></div></div></div></div></div></div><div style="box-sizing: border-box; outline: 0px; margin: 8px 0px 0px 40px; padding: 0px; list-style: decimal; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; overflow-wrap: break-word;"><p style="box-sizing: border-box; outline: 0px; margin: 0px 0px 16px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-size: 16px; color: rgb(77, 77, 77); font-weight: 400; line-height: 26px; overflow-wrap: break-word;"></p><div><span style="font-family: &quot;Microsoft YaHei&quot;;">1.nginx升级</span></div><div>查看现在的nginx镜像的运行命令（挂载的目录及端口）</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; outline: 0px; font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; overflow-wrap: break-word;-en-paragraph:true;">docker inspect nginx</span></div></div><div style="box-sizing: border-box; outline: 0px; margin: 8px 0px 0px 40px; padding: 0px; list-style: decimal; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; overflow-wrap: break-word;"><p style="box-sizing: border-box; outline: 0px; margin: 0px 0px 16px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-size: 16px; color: rgb(77, 77, 77); font-weight: 400; line-height: 26px; overflow-wrap: break-word;"></p><div>拉取最新镜像：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; outline: 0px; font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; overflow-wrap: break-word;-en-paragraph:true;">docker pull nginx</span><span style="-en-paragraph:true;"> </span><span style="-en-paragraph:true;">或 指定版本：</span><span style="-en-paragraph:true;"> </span><span style="box-sizing: border-box; outline: 0px; font-family: &quot;Source Code Pro&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Anonymous Pro&quot;, &quot;Droid Sans Mono&quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-size: 14px; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; overflow-wrap: break-word;-en-paragraph:true;">docker pull nginx:1.16.1</span></div></div><div><br/></div></span>
</div></body></html> 