<html>
<head>
  <title>031vue的数据绑定实现-*-</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601568 (zh-CN, DDL); Windows/6.1.1 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4660"/>
<h1>031vue的数据绑定实现-*-</h1>

<div>
<span><div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: tahoma, arial, &quot;Microsoft YaHei&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">vue中的响应式数据绑定是通过数据劫持和观察者模式来实现的。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">当然vuejs不可能是这样简单暴力的实现方式，vuejs是通过在实现一个观察者来实现的数据驱动。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="031vue的数据绑定实现--_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">首先，vuejs在实例化的过程中，会对遍历传给实例化对象选项中的data 选项，</span><span style="background-color: rgb(255, 250, 165); font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">遍历其所有属性并使用 Object.defineProperty(</span></span><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-family: &quot;PingFang SC&quot;;-evernote-highlight:true;">方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。</span><span style="background-color: rgb(255, 250, 165); font-size: 12px; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif;-evernote-highlight:true;">) 把这些属性全部转为 getter/setter</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif;">。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">同时每一个实例对象都有一个watcher实例对象，</span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 12px; font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(227, 0, 0);">他会在模板编译的过程中,用getter去访问data的属性</span></span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">，watcher此时就会把用到的data属性记为依赖，这样就建立了视图与数据之间的联系。当之后我们渲染视图的数据依赖发生改变（即数据的setter被调用）的时候，watcher会对比前后两个的数值是否发生变化，然后确定是否通知视图进行重新渲染。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">这样就实现了所谓的数据对于视图的驱动。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="background-color: rgb(255, 255, 255); text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">实例化 =》 遍历对象中的data对象 =》遍历其所有属性并使用 </span><span style="background-color: rgb(255, 250, 165); text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">Object.defineProperty 把这些属性全部转为 getter/setter </span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Microsoft Yahei&quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">同时每一个实例对象都有一个watcher实例对象</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; text-align: justify; font-size: 12px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></div><div><span style="font-size: 12pt; color: rgb(34, 34, 34); font-family: tahoma;">观察者模式(</span></div><ul style="margin: 0px 0px 0px 30px; padding: 0px; word-break: break-all; color: rgb(73, 73, 73); font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 16px; font-weight: bold;">单例模式 </span><span style="font-size: 16px;">  </span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 16px; font-weight: bold;">观察者模式</span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 16px; font-weight: bold;">工厂模式</span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 16px; font-weight: bold;">命令模式</span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 16px; font-weight: bold;">职责链模式</span></div></li></ul><div><span style="font-size: 12pt; color: rgb(34, 34, 34); font-family: tahoma;">)</span></div><div style="margin: 10px auto; padding: 0px; font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="background-color: rgb(254, 254, 242); font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">       所谓的观察者模式我所认为的就是</span><span style="font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-evernote-highlight:true;">订阅发布</span><span style="background-color: rgb(254, 254, 242); font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">。其中中间关于调度方法还有一点区别，这里就不多做叙述了</span></div><div style="margin: 10px auto; padding: 0px; font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">　　接下来给大家分享下我对所谓的发布订阅的理解吧，其实这种设计理念在react体现在了跨组件通信中，</span></div><div style="margin: 10px auto; padding: 0px; font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">原理就是订阅者写一个函数然后不执行，接着把其储存在某一个地方，等待着发布者去触发这个函数，然后</span></div><div style="margin: 10px auto; padding: 0px; font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">达到触发函数进行函数传参，从而能够达到组件之中的跨组件通信</span></div><div style="margin: 10px auto; padding: 0px; font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 13px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">具体代码如下</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//第一种方式利用数组是比较啰嗦的</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">// const Observer={</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     arr:[],</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     $on(event,cb){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         this.arr.push({[event]:cb})</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     },</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     $emit(event,msg){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         //console.log(this.arr)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         this.arr.forEach(item=&gt;{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//             //console.log(Object.keys(item))</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//             if(Object.keys(item)[0]===event){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//                 item[Object.keys(item)[0]](msg)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//             }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         })</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">// }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//第二种方式利用对象</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//这种方式只能监听一次  假如我们想要监听多次可以看下下面第三种方法</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">// const Observer={</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     arr:{},</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     $on(event,cb){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         this.arr[event]=cb</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     },</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     $emit(event,msg){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//         this.arr[event](msg)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//     }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">// }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//第三种方式 多次监听的订阅者</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">const</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"> {</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr:</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"> {},</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//订阅者监听函数</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$on</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cb</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(197, 134, 192); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">if</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">]){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">].</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">push</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cb</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        }</span><span style="font-size: 14px; color: rgb(197, 134, 192); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">else</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">]</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cb</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">]</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        </span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    },</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//发布者触发函数</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$emit</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">]</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&amp;&amp;</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">].</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">forEach</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cb</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cb</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        })</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    },</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//销毁阶段</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$delete</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">){</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">delete</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">arr</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">event</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">]</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//以下为封装检验过程</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$on</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;up&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//订阅者监听函数</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(78, 201, 176); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">})</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$on</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;up&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//订阅者监听函数</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(78, 201, 176); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">})</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$delete</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;up&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$on</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;down&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span><span style="font-size: 14px; color: rgb(86, 156, 214); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//订阅者监听函数</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(78, 201, 176); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">msg</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">})</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$emit</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;up&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(181, 206, 168); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">123</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//发布者 做函数的触发</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="font-size: 14px; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Observer</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(220, 220, 170); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">$emit</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;down&quot;</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(181, 206, 168); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">456</span><span style="font-size: 14px; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">)</span><span style="font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//发布者</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; text-align: left;"><span style="white-space: normal; font-size: 14px; color: rgb(106, 153, 85); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">//这样功能就可以实现了然后抛出使用了</span></div></div></span>
</div></body></html> 